<html>
  <head>
    <title>MeCoDEM Tweets in the last week</title>
<link rel="stylesheet" href="../../css/devsite-cyan.css">
    <script src="../../js/jquery.min.js"></script>
<p style="display: none; height: 0; width: 0">Slideshow for MeCoDEM Tweets in the last week</p>

<style type="text/css">
     #tweet {
       display:block;
       position:fixed;
       width:600px;
       height:100%;
       top:0;
       left:0;
       padding-top:140px;
       overflow:auto;
       background-color:#f0f0f0;
      }

 #tweet iframe {
   border: none !important;
   box-shadow: none !important;
 }
html {
       overflow-y: scroll;
}
 </style>

<script type="text/javascript" src="../../js/widgets.js"></script>

<script type="text/javascript" src="../../js/loader.js"></script>
  <script type="text/javascript">
    google.charts.load('current', {packages:['corechart']});
    google.charts.setOnLoadCallback(drawExample3);

var max=0;

function drawExample3() {
  var options = {
    width: 800,
    height: 600,
//    pointSize: 5,
    vAxis: {minValue:0},
    animation: {
      duration: 500,
      easing: 'in'
    },
     curveType: 'function',
 legend:{position:'none'},
//  hAxis: { format: 'M/d HH:MM:SS' },
    series:
       {
         0: { pointShape: 'circle',  pointSize: 5 },
         1: { pointShape: 'circle', pointSize: 15 },
       },
tooltip: { trigger: 'selection', isHtml: true }
  };

  var chart = new google.visualization.LineChart(
      document.getElementById('example3-visualization'));
  var data = new google.visualization.DataTable();
  data.addColumn('datetime', 'Date & Time');
  data.addColumn('number', 'Other');
  data.addColumn('number', 'Current');
  data.addColumn({type:'string', 'role': 'annotation'});
  data.addColumn({type:'string', 'role': 'annotation'});

var data_set=new Array("");
var status=new Array("");

data_set[0]=[new Date("2016-11-16 14:26:05"),0];
status[0]="798894915451129857";
data_set[1]=[new Date("2016-11-16 14:35:07"),1];
status[1]="798897191016230912";
data_set[2]=[new Date("2016-11-16 16:14:16"),0];
status[2]="798922141320122368";
data_set[3]=[new Date("2016-11-17 10:45:23"),5];
status[3]="799201763794489344";
data_set[4]=[new Date("2016-11-17 10:46:01"),0];
status[4]="799201920686718976";
data_set[5]=[new Date("2016-11-17 10:50:38"),0];
status[5]="799203084631150592";
data_set[6]=[new Date("2016-11-17 11:15:13"),0];
status[6]="799209272068468736";
data_set[7]=[new Date("2016-11-17 11:50:47"),1];
status[7]="799218222901837828";
data_set[8]=[new Date("2016-11-17 11:57:28"),0];
status[8]="799219901932015616";
data_set[9]=[new Date("2016-11-17 12:40:01"),1];
status[9]="799230610963197952";
data_set[10]=[new Date("2016-11-17 12:48:24"),0];
status[10]="799232721977344000";
data_set[11]=[new Date("2016-11-17 14:28:21"),0];
status[11]="799257872945254400";
data_set[12]=[new Date("2016-11-17 14:28:28"),0];
status[12]="799257904889163776";
data_set[13]=[new Date("2016-11-17 14:47:56"),1];
status[13]="799262802733125632";
data_set[14]=[new Date("2016-11-17 15:08:34"),0];
status[14]="799267994136231936";
data_set[15]=[new Date("2016-11-17 17:01:34"),1];
status[15]="799296434050887680";
data_set[16]=[new Date("2016-11-17 21:43:18"),0];
status[16]="799367333550510080";
data_set[17]=[new Date("2016-11-17 23:07:20"),0];
status[17]="799388481785106432";
data_set[18]=[new Date("2016-11-18 07:59:56"),0];
status[18]="799522514833702913";
data_set[19]=[new Date("2016-11-18 08:02:57"),0];
status[19]="799523273868476416";
data_set[20]=[new Date("2016-11-18 08:09:39"),2];
status[20]="799524961278984192";
data_set[21]=[new Date("2016-11-18 08:11:13"),0];
status[21]="799525355015077888";
data_set[22]=[new Date("2016-11-18 08:13:15"),3];
status[22]="799525865151496192";
data_set[23]=[new Date("2016-11-18 08:13:46"),0];
status[23]="799525996059824128";
data_set[24]=[new Date("2016-11-18 08:15:43"),0];
status[24]="799526488349483009";
data_set[25]=[new Date("2016-11-18 08:15:52"),0];
status[25]="799526525024538624";
data_set[26]=[new Date("2016-11-18 08:19:23"),5];
status[26]="799527409393561600";
data_set[27]=[new Date("2016-11-18 08:20:15"),0];
status[27]="799527627593830404";
data_set[28]=[new Date("2016-11-18 08:21:34"),0];
status[28]="799527960659247105";
data_set[29]=[new Date("2016-11-18 08:26:02"),3];
status[29]="799529080991399936";
data_set[30]=[new Date("2016-11-18 08:26:26"),0];
status[30]="799529181713465344";
data_set[31]=[new Date("2016-11-18 08:28:43"),3];
status[31]="799529756115009537";
data_set[32]=[new Date("2016-11-18 08:28:48"),2];
status[32]="799529777971494912";
data_set[33]=[new Date("2016-11-18 08:29:04"),0];
status[33]="799529847227904004";
data_set[34]=[new Date("2016-11-18 08:29:15"),0];
status[34]="799529894208274432";
data_set[35]=[new Date("2016-11-18 08:29:40"),0];
status[35]="799529996008165376";
data_set[36]=[new Date("2016-11-18 08:33:04"),3];
status[36]="799530854401839104";
data_set[37]=[new Date("2016-11-18 08:33:22"),0];
status[37]="799530926472568832";
data_set[38]=[new Date("2016-11-18 08:34:35"),0];
status[38]="799531233424379904";
data_set[39]=[new Date("2016-11-18 08:35:00"),0];
status[39]="799531341213822980";
data_set[40]=[new Date("2016-11-18 08:35:07"),0];
status[40]="799531370292932608";
data_set[41]=[new Date("2016-11-18 08:35:39"),0];
status[41]="799531504179249152";
data_set[42]=[new Date("2016-11-18 08:38:11"),2];
status[42]="799532138974609408";
data_set[43]=[new Date("2016-11-18 08:38:22"),0];
status[43]="799532187443929088";
data_set[44]=[new Date("2016-11-18 08:38:48"),0];
status[44]="799532294478450688";
data_set[45]=[new Date("2016-11-18 08:40:51"),0];
status[45]="799532809538912256";
data_set[46]=[new Date("2016-11-18 08:40:53"),0];
status[46]="799532819823423488";
data_set[47]=[new Date("2016-11-18 08:41:25"),0];
status[47]="799532952573112321";
data_set[48]=[new Date("2016-11-18 08:42:11"),0];
status[48]="799533145817288704";
data_set[49]=[new Date("2016-11-18 08:42:47"),0];
status[49]="799533297881726977";
data_set[50]=[new Date("2016-11-18 08:44:39"),0];
status[50]="799533767455100929";
data_set[51]=[new Date("2016-11-18 08:45:34"),0];
status[51]="799533998963851264";
data_set[52]=[new Date("2016-11-18 08:49:40"),0];
status[52]="799535031551135744";
data_set[53]=[new Date("2016-11-18 08:54:04"),5];
status[53]="799536138830680065";
data_set[54]=[new Date("2016-11-18 08:58:44"),0];
status[54]="799537312648536066";
data_set[55]=[new Date("2016-11-18 09:00:15"),0];
status[55]="799537695135531009";
data_set[56]=[new Date("2016-11-18 09:01:40"),0];
status[56]="799538049822638080";
data_set[57]=[new Date("2016-11-18 09:04:25"),5];
status[57]="799538741991899138";
data_set[58]=[new Date("2016-11-18 09:04:53"),0];
status[58]="799538859604320257";
data_set[59]=[new Date("2016-11-18 09:11:59"),0];
status[59]="799540646398857217";
data_set[60]=[new Date("2016-11-18 09:21:21"),0];
status[60]="799543002804981761";
data_set[61]=[new Date("2016-11-18 09:23:08"),2];
status[61]="799543452891541506";
data_set[62]=[new Date("2016-11-18 09:23:29"),4];
status[62]="799543539361255424";
data_set[63]=[new Date("2016-11-18 09:24:00"),0];
status[63]="799543672547246080";
data_set[64]=[new Date("2016-11-18 09:24:43"),0];
status[64]="799543848867348480";
data_set[65]=[new Date("2016-11-18 09:24:52"),0];
status[65]="799543886712553476";
data_set[66]=[new Date("2016-11-18 09:24:53"),0];
status[66]="799543891330498561";
data_set[67]=[new Date("2016-11-18 09:28:31"),0];
status[67]="799544808373178368";
data_set[68]=[new Date("2016-11-18 09:29:43"),0];
status[68]="799545109083803648";
data_set[69]=[new Date("2016-11-18 09:30:19"),2];
status[69]="799545259994845185";
data_set[70]=[new Date("2016-11-18 09:30:58"),0];
status[70]="799545425439191040";
data_set[71]=[new Date("2016-11-18 09:31:37"),0];
status[71]="799545588937293824";
data_set[72]=[new Date("2016-11-18 09:34:26"),0];
status[72]="799546294972907520";
data_set[73]=[new Date("2016-11-18 09:36:22"),0];
status[73]="799546781986156544";
data_set[74]=[new Date("2016-11-18 09:36:58"),1];
status[74]="799546932687474689";
data_set[75]=[new Date("2016-11-18 09:39:44"),2];
status[75]="799547630066028544";
data_set[76]=[new Date("2016-11-18 09:39:48"),0];
status[76]="799547645819781120";
data_set[77]=[new Date("2016-11-18 09:40:41"),0];
status[77]="799547866993872896";
data_set[78]=[new Date("2016-11-18 09:41:01"),0];
status[78]="799547952553492480";
data_set[79]=[new Date("2016-11-18 09:41:12"),0];
status[79]="799547997696696320";
data_set[80]=[new Date("2016-11-18 09:42:22"),0];
status[80]="799548290903736320";
data_set[81]=[new Date("2016-11-18 09:43:48"),4];
status[81]="799548651861405698";
data_set[82]=[new Date("2016-11-18 09:44:43"),0];
status[82]="799548885962211328";
data_set[83]=[new Date("2016-11-18 09:48:29"),1];
status[83]="799549833656856576";
data_set[84]=[new Date("2016-11-18 09:48:31"),0];
status[84]="799549838740299778";
data_set[85]=[new Date("2016-11-18 09:50:17"),0];
status[85]="799550285106610180";
data_set[86]=[new Date("2016-11-18 09:50:55"),0];
status[86]="799550443919699968";
data_set[87]=[new Date("2016-11-18 09:51:45"),0];
status[87]="799550654998085633";
data_set[88]=[new Date("2016-11-18 09:52:35"),2];
status[88]="799550862171504640";
data_set[89]=[new Date("2016-11-18 09:53:02"),5];
status[89]="799550976994709505";
data_set[90]=[new Date("2016-11-18 09:53:16"),6];
status[90]="799551034276409344";
data_set[91]=[new Date("2016-11-18 09:53:41"),0];
status[91]="799551139825983492";
data_set[92]=[new Date("2016-11-18 09:54:08"),0];
status[92]="799551255433662464";
data_set[93]=[new Date("2016-11-18 09:56:53"),2];
status[93]="799551943995703297";
data_set[94]=[new Date("2016-11-18 09:57:44"),0];
status[94]="799552159574609920";
data_set[95]=[new Date("2016-11-18 09:59:58"),0];
status[95]="799552722244603905";
data_set[96]=[new Date("2016-11-18 10:00:28"),0];
status[96]="799552848241524736";
data_set[97]=[new Date("2016-11-18 10:02:30"),0];
status[97]="799553357560115203";
data_set[98]=[new Date("2016-11-18 10:03:05"),0];
status[98]="799553507925913600";
data_set[98]=[new Date("2016-11-18 10:08:47"),0];
status[98]="799554939051773952";
data_set[99]=[new Date("2016-11-18 10:15:15"),0];
status[99]="799556569524568069";


var dateFormat = new google.visualization.DateFormat({formatType: 'long'});
//dateFormat.format(data_set, 0);

var index1=0;
  var nextbutton = document.getElementById('next_tweet');
  var previousbutton = document.getElementById('previous_tweet');
  function drawChart() {
    nextbutton.disabled = true;
    previousbutton.disabled =true;
    google.visualization.events.addListener(chart, 'ready',
        function() {
          nextbutton.disabled = false;
	  previousbutton.disabled = false;
        });
    chart.draw(data, options);
  }
  nextbutton.onclick = function() {
if (!data_set[index1]) { nextbutton.disabled = true; return; }
    if (index1>0 && data_set[index1-1]) 
	{
	  var temp1=data_set[index1-1]; temp1[2]=null; temp1[3]=''; temp1[4]='';
//alert("t1:"+temp1);
	  data.removeRow(index1-1);
	  data.insertRows(index1-1, [temp1]);
        }
    if (data_set[index1]) 
        {
          var temp2=data_set[index1]; temp2[2]=data_set[index1][1];
	  temp2[3]=data_set[index1][0]+" ";
	  temp2[4]=data_set[index1][1]+" tweets";
	  if (index1<max) data.removeRow(index1);
          data.insertRows(index1, [temp2]);
        }

//if (data.getNumberOfRows() > 3) {
//data.removeRow(data.getNumberOfRows()-1);
//    }

//    if (data_set[index1-3]) { data.removeRow(0); }

    $("#tweet_content").html('<div class="tweet" id="'+status[index1]+'"></div>');
    $("#counter").html(' '+(index1+1)+' ');
    var tweets = jQuery(".tweet");
    jQuery(tweets).each( function( t, tweet ) {
      var id = jQuery(this).attr('id');
      twttr.widgets.createTweet(
        id, tweet,
        {
          conversation : 'none',    // or all
          cards        : 'visible',  // or visible
          linkColor    : '#cc0000', // default is blue
          theme        : 'light'    // or dark
        });
      });
    index1++;
if (index1>max) max=index1;
    drawChart();
  }

  previousbutton.onclick = function() {
    // Generating a random x, y pair and inserting it so rows are sorted.
if (!data_set[index1-2]) { previousbutton.disabled = true; return; }
    if (data_set[index1-1])
        {
          var temp1=data_set[index1-1]; temp1[2]=null;
		 temp1[3]=''; temp1[4]='';
//alert("t1:"+temp1);
          data.removeRow(index1-1);
          data.insertRows(index1-1, [temp1]);
        }
    if (index1-1>0 && data_set[index1-2] && data_set[index1])
        {
          var temp2=data_set[index1-2]; temp2[2]=data_set[index1-2][1];
          temp2[3]=data_set[index1][0]+" ";
          temp2[4]=data_set[index1][1]+" tweets";
 //alert("t2:"+temp2);
          data.removeRow(index1-2);
          data.insertRows(index1-2, [temp2]);
          chart.setSelection([{row:index1-2, column:1}]);
        }

    $("#tweet_content").html('<div class="tweet" id="'+status[index1-1]+'"></div>');
    $("#counter").html(' '+(index1-1)+' ');
    var tweets = jQuery(".tweet");
    jQuery(tweets).each( function( t, tweet ) {
      var id = jQuery(this).attr('id');
      twttr.widgets.createTweet(
        id, tweet,
        {
          conversation : 'none',    // or all
          cards        : 'visible',  // or visible
          linkColor    : '#cc0000', // default is blue
          theme        : 'light'    // or dark
        });
      });
    drawChart();
    index1--;
  }

google.visualization.events.addListener(chart, 'select', function () {
    var selection = chart.getSelection();
//    alert("Index: "+selection[0].row);
   if (selection[0].row !==undefined)
    {
      $("#tweet_content").html('<div class="tweet" id="'+status[selection[0].row]+'"></div>');
      var tweets = jQuery(".tweet");
      jQuery(tweets).each( function( t, tweet ) 
       {
         var id = jQuery(this).attr('id');
         twttr.widgets.createTweet(
           id, tweet,
            {
              conversation : 'none',    // or all
              cards        : 'visible',  // or visible
              linkColor    : '#cc0000', // default is blue
              theme        : 'light'    // or dark
            });
       });
     }
}); 

  drawChart();
}
</script>
</head>
<body>
 Search query: <b>mecodem OR from:@mecodem</b>
<table><tr><td><button id="previous_tweet"> Previous Tweet</button> <span id="counter"></span> <button id="next_tweet"> Next Tweet</button></td><td></td></tr><td style="width:900px"><div id="example3-visualization"></div></td>
<td style="width:600px"><span id="tweet_content"></span></td></tr></table>
<!--block end-->
</body>
</html>
